{"version":3,"file":"my.js","sources":["pages/my/my.vue","../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbXkvbXkudnVl"],"sourcesContent":["<template>\n\t<view class=\"content\">\n\t\t<view class=\"topBox\">\r\n\t\t\t<view class=\"setbox\">\r\n\t\t\t\t<view class=\"set-left\">\r\n\t\t\t\t\t<uni-icons type=\"calendar\" size=\"30\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t\t<view class=\"txt\">签到</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"set-right\">\r\n\t\t\t\t\t<uni-icons type=\"gear\" size=\"30\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t\t<uni-icons type=\"chat\" size=\"30\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"user\">\r\n\t\t\t\t<view class=\"u-top\">\r\n\t\t\t\t\t<template v-if=\"!userInfo.nickname\">\r\n\t\t\t\t\t\t<image src=\"/static/tabbar/my.png\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view class=\"tit\">注册/登录</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t<image :src=\"userInfo.avatarUrl\"></image>\r\n\t\t\t\t\t\t<view class=\"tit\">{{userInfo.nickname}}</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"u-bottom\">\r\n\t\t\t\t\t<view class=\"u-item\">\r\n\t\t\t\t\t\t<view class=\"num\">12</view>\r\n\t\t\t\t\t\t<view class=\"u-tit\">点赞</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"u-item\">\r\n\t\t\t\t\t\t<view class=\"num\">12</view>\r\n\t\t\t\t\t\t<view class=\"u-tit\">喜欢</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"u-item\">\r\n\t\t\t\t\t\t<view class=\"num\">12</view>\r\n\t\t\t\t\t\t<view class=\"u-tit\">浏览</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"u-item\">\r\n\t\t\t\t\t\t<view class=\"num\">12</view>\r\n\t\t\t\t\t\t<view class=\"u-tit\">收藏</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t\r\n\t\t</view>\r\n\t\t\r\n\t\t\r\n\t\t<view class=\"listbox\">\n\t\t\t<view class=\"lists\">\n\t\t\t\t<uni-list>\n\t\t\t\t\t<uni-list-item show-extra-icon=\"true\" extra-icon=\"extraIcon1\" showArrow title=\"个人信息\" clickable></uni-list-item>\n\t\t\t\t\t<uni-list-item show-extra-icon=\"true\" extra-icon=\"extraIcon1\" showArrow title=\"用户反馈\" clickable></uni-list-item>\n\t\t\t\t\t<uni-list-item show-extra-icon=\"true\" extra-icon=\"extraIcon1\" showArrow title=\"我的创作\" clickable></uni-list-item>\n\t\t\t\t\t<uni-list-item show-extra-icon=\"true\" extra-icon=\"extraIcon1\" showArrow title=\"分享有赏\" clickable></uni-list-item>\n\t\t\t\t</uni-list>\n\t\t\t</view>\n\t\t</view>\r\n\t\t\r\n\t\t<up-popup :show=\"show\" @close=\"close\" closeable round=\"20\">\r\n\t\t  <view class=\"popup\">\r\n\t\t    <view class=\"title\">获取头像和昵称</view>\r\n\t\t  </view>\r\n\t\t  <view class=\"flex\">\r\n\t\t    <view class=\"label\">获取头像</view>\r\n\t\t    <button class=\"avatar-warpper\" open-type=\"chooseAvatar\" @chooseavatar=\"onChooseavatar\">\r\n\t\t      <image class=\"avatar\" :src=\"userInfo.avatarUrl\"></image>\r\n\t\t    </button>\r\n\t\t  </view>\r\n\t\t  <view class=\"flex\">\r\n\t\t    <view class=\"label\">获取昵称</view>\r\n\t\t    <input type=\"nickname\" @input=\"changeName\" />\r\n\t\t  </view>\r\n\t\t\t<button  size=\"default\" type=\"primary\" @click=\"userSumbit\">确定</button>\r\n\t\t</up-popup>\n\n\n\t</view>\n</template>\n\n<script setup>\nimport { reactive } from 'vue';\r\nimport { onLoad } from '@dcloudio/uni-app'\r\nimport { login, getUserInfo} from '../../api/api.js'\n\r\n\t\r\n\tconst userInfo=reactive({\r\n\t\tnickname:\"\",\r\n\t\tavatarUrl:\"\"\r\n\t})\r\n\t\r\n\tconst setFun = () => {\r\n\t    uni.showModal({\r\n\t        title: \"提示\",\r\n\t        content: \"请您先进行授权\",\r\n\t        success(res) {\r\n\t            if (res.confirm) {\r\n\t                uni.login({\r\n\t                    success: async (data) => {\r\n\t                        console.log(data)\r\n\t                        const { token } = await login(data.code)\r\n\t                        console.log(\"token: \", token)\r\n\t                        uni.setStorageSync('token', token)\r\n\t\r\n\t                        const { avatarUrl, nickname } = await getUserInfo()\r\n\t                        console.log(await getUserInfo())\r\n\t                        userInfo.nickname = nickname\r\n\t                        userInfo.avatarUrl = avatarUrl\r\n\t                    }\r\n\t                })\r\n\t            }\r\n\t        }\r\n\t    })\r\n\t}\r\n\t\r\n\tconst show = ref(false)\r\n\tconst close = () => {\r\n\t  show.value = false\r\n\t}\r\n\tconst onChooseavatar = (e) => {\r\n\t  console.log(e.avatarUrl)\r\n\t\tuserInfo.avatarUrl = e.avatarUrl\r\n\t}\r\n\tconst changeName = (e) => {\r\n\t  console.log(e)\r\n\t\tuserInfo.nickname = e.detail.value\r\n\t}\r\n\t\r\n\tconst userSumbit = () => {\r\n\t  uni.setStorageSync(\"userInfo\", JSON.stringify(userInfo))\r\n\t\tshow.value = false\r\n\t}\r\n\t\r\n\tonLoad(async () => {\r\n\t    if (uni.getStorageSync('token') && !uni.getStorageSync('userInfo')) \r\n\t\t\t{\r\n\t        const { avatarUrl, nickname } = await getUserInfo()\r\n\t        console.log(await getUserInfo())\r\n\t        userInfo.nickname = nickname\r\n\t        userInfo.avatarUrl = avatarUrl\r\n\t    } \r\n\t\t\telse if (uni.getStorageSync('token') && !uni.getStorageSync('userInfo')) \r\n\t\t\t{\r\n\t        const {avatarUrl, nickname} = JSON.parse(uni.getStorageSync('userInfo'))\r\n\t        userInfo.nickname = nickname\r\n\t        userInfo.avatarUrl = avatarUrl\r\n\t    }\r\n\t})\r\n\r\n\t\r\n\tconst extraIcon1 = reactive({\r\n\t  color: '#666666',\r\n\t  size: '22',\r\n\t  type: 'auth'\r\n\t})\r\n\t\r\n\tconst extraIcon2 = reactive({\r\n\t  color: '#666666',\r\n\t  size: '22',\r\n\t  type: 'cart'\r\n\t})\r\n\n\t\n</script>\n\n<style lang=\"scss\" scoped>\r\n\t.content{\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\t\r\n\t\t.topBox{\r\n\t\t\twidth: 100%;\r\n\t\t\tposition: relative;\r\n\t\t\tz-index: 1;\r\n\t\t\toverflow: hidden;\r\n\t\t\tpadding: 40rpx 20rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t}\r\n\t\t.topBox::after{\r\n\t\t\tcontent: \"\";\r\n\t\t\twidth: 140%;\r\n\t\t\theight: 200rpx;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tleft: -20%;\r\n\t\t\tbackground-color: #00aaff;\r\n\t\t\tborder-radius: 0 0 50% 50%;\r\n\t\t\tz-index: -1;\r\n\t\t}\r\n\t\t.setbox{\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\t.set-left{\r\n\t\t\t\twidth: 18%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\t\t\t.txt{\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.user{\r\n\t\t\tmargin-top: 35rpx;\r\n\t\t\tpadding: 30rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\theight: 280rpx;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tbox-shadow: 1px 10rpx 20rpx #ececec;\r\n\t\t\tborder-radius: 16rpx;\r\n\t\t\t.u-top{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-right: 400rpx;\r\n\t\t\t\timage{\r\n\t\t\t\t\twidth:100rpx;\r\n\t\t\t\t\theight: 100rpx;\r\n\t\t\t\t\tborder-radius: 50%;\r\n\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.tit{\r\n\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\tfont-weight: 700;\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.u-bottom{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-around;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\t.u-item{\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t.u-tit{\r\n\t\t\t\t\t\tcolor: #757575;\r\n\t\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\t\tmargin-top: 10rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.num{\r\n\t\t\t\t\t\tcolor: #000;\r\n\t\t\t\t\t\tfont-size: 33rpx;\r\n\t\t\t\t\t\tfont-weight: 700;\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.listbox{\r\n\t\t\theight: 200rpx;\r\n\t\t\tmargin: 10rpx auto 0;\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tbox-sizing: border-box;\r\n\t\t\tborder-radius: 12rpx;\r\n\t\t}\r\n\t\t\r\n\t\t.popup {\r\n\t\t    padding: 20rpx;\r\n\t\t    border-radius: 20rpx 20rpx 0 0;\r\n\t\t\r\n\t\t    .title {\r\n\t\t        margin-bottom: 20rpx;\r\n\t\t        font-size: 40rpx;\r\n\t\t        text-align: center;\r\n\t\t    }\r\n\t\t\r\n\t\t    .flex {\r\n\t\t        display: flex;\r\n\t\t        justify-content: flex-start;\r\n\t\t        align-items: center;\r\n\t\t        border-bottom: 1px solid #f5f5f5;\r\n\t\t        padding: 24rpx 0;\r\n\t\t    }\r\n\t\t\r\n\t\t    image {\r\n\t\t        width: 70rpx;\r\n\t\t        height: 70rpx;\r\n\t\t    }\r\n\t\t\r\n\t\t    .avatar-warpper {\r\n\t\t        border: none;\r\n\t\t        border-radius: 10rpx;\r\n\t\t        width: 70rpx;\r\n\t\t        height: 70rpx;\r\n\t\t        margin-left: 20rpx;\r\n\t\t        padding: 0;\r\n\t\t    }\r\n\t\t}\r\n\r\n\t}\n</style>\n","import MiniProgramPage from 'D:/Desktop/uni-app/Pro/pages/my/my.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","uni","onLoad","getUserInfo"],"mappings":";;;;;;;;;;;;;;;;;;;AAuFC,UAAM,WAASA,cAAAA,SAAS;AAAA,MACvB,UAAS;AAAA,MACT,WAAU;AAAA,IACZ,CAAE;AA0BD,UAAM,OAAO,IAAI,KAAK;AACtB,UAAM,QAAQ,MAAM;AAClB,WAAK,QAAQ;AAAA,IACd;AACD,UAAM,iBAAiB,CAAC,MAAM;AAC5BC,oBAAAA,MAAY,MAAA,OAAA,0BAAA,EAAE,SAAS;AACxB,eAAS,YAAY,EAAE;AAAA,IACvB;AACD,UAAM,aAAa,CAAC,MAAM;AACxBA,oBAAAA,MAAY,MAAA,OAAA,0BAAA,CAAC;AACd,eAAS,WAAW,EAAE,OAAO;AAAA,IAC7B;AAED,UAAM,aAAa,MAAM;AACvBA,oBAAG,MAAC,eAAe,YAAY,KAAK,UAAU,QAAQ,CAAC;AACxD,WAAK,QAAQ;AAAA,IACb;AAEDC,kBAAAA,OAAO,YAAY;AACf,UAAID,cAAAA,MAAI,eAAe,OAAO,KAAK,CAACA,cAAG,MAAC,eAAe,UAAU,GACnE;AACM,cAAM,EAAE,WAAW,SAAU,IAAG,MAAME,QAAAA,YAAa;AACnDF,sBAAAA,MAAY,MAAA,OAAA,0BAAA,MAAME,QAAW,YAAA,CAAE;AAC/B,iBAAS,WAAW;AACpB,iBAAS,YAAY;AAAA,MACxB,WACMF,cAAAA,MAAI,eAAe,OAAO,KAAK,CAACA,cAAG,MAAC,eAAe,UAAU,GACtE;AACM,cAAM,EAAC,WAAW,SAAQ,IAAI,KAAK,MAAMA,cAAG,MAAC,eAAe,UAAU,CAAC;AACvE,iBAAS,WAAW;AACpB,iBAAS,YAAY;AAAA,MACxB;AAAA,IACN,CAAE;AAGkBD,2BAAS;AAAA,MAC1B,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,IACT,CAAE;AAEkBA,2BAAS;AAAA,MAC1B,OAAO;AAAA,MACP,MAAM;AAAA,MACN,MAAM;AAAA,IACT,CAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChKF,GAAG,WAAW,eAAe;"}