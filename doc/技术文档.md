# 技术文档

## 一、项目概述

“拾光悦景点宣传小程序”是一款基于微信小程序平台的轻量级旅游信息展示与互动应用。该系统面向普通游客和管理员，提供景点信息浏览、地图导航、评论评分、收藏推荐等功能，并配备后台管理系统用于数据维护与分析。

本技术文档旨在说明系统的整体技术架构、所采用的核心技术栈及其选型理由，为开发团队提供统一的技术标准与实现方案。

## 二、技术架构

### 1. 架构模式：前后端分离 + 小程序框架

- **前端（小程序）**：
  - 使用 `uni-app` 开发跨平台小程序（当前以微信小程序为主）
  - 基于 Vue.js 的语法结构
  - 使用 Vuex 管理全局状态
  - 使用 Vue Router（兼容 uni-app 路由机制）进行页面跳转管理
- **后端服务**：
  - 采用 RESTful API 接口设计
  - 使用 Node.js + Express/Koa 搭建后端服务
  - 数据库使用 MongoDB 或 MySQL（根据业务需求选择）
- **部署环境**：
  - 前端部署在 微信开发者平台
  - 后端部署在 阿里云/腾讯云 服务器 + Nginx 反向代理
  - 使用 Docker 容器化部署提升可维护性

### 2. 整体架构图示意：

![整体架构图](D:\Desktop\uni-app\img\整体架构图.png)



## 三、核心技术选型及说明

### 1. 前端技术栈

| 技术/工具               | 用途说明                                                     |
| :---------------------- | :----------------------------------------------------------- |
| **uni-app**             | 使用 Vue.js 语法编写一次，多端编译运行（微信小程序、H5等），提高开发效率 |
| **Vue.js**              | 响应式框架，组件化开发，便于维护和复用                       |
| **Vuex**                | 全局状态管理，适用于用户登录状态、收藏夹、搜索记录等共享数据 |
| **Vue Router**          | 页面路由控制（uni-app 兼容处理）                             |
| **uView UI**            | 基于 uni-app 的 UI 组件库，简化界面开发                      |
| **axios / uni.request** | 发起网络请求，调用后端接口                                   |
| **本地缓存 storage**    | 存储用户基本信息、收藏列表、历史浏览记录等                   |

### 2. 后端技术栈

| 技术/工具                | 用途说明                                                     |
| :----------------------- | :----------------------------------------------------------- |
| **Node.js**              | 提供高性能异步非阻塞 I/O，适合高并发的小程序后端场景         |
| **Express / Koa**        | Web 框架，构建 RESTful API，处理请求与响应                   |
| **MongoDB / MySQL**      | 数据库存储，MongoDB 适合灵活的数据结构（如评论、日志等），MySQL 更适合关系型数据（如用户、权限） |
| **JWT**                  | 用户身份认证，保证接口安全                                   |
| **Mongoose / Sequelize** | MongoDB / MySQL 的 ORM 工具，简化数据库操作                  |
| **Redis**                | 缓存热点数据（如热门榜单、推荐结果），提升接口性能           |
| **Nginx**                | 反向代理、负载均衡、静态资源托管                             |
| **Docker**               | 容器化部署，便于版本管理和快速上线                           |
| **PM2**                  | Node.js 进程管理工具，支持自动重启、集群模式                 |

### 3. 第三方服务集成

| 服务名称                      | 用途说明                           |
| :---------------------------- | :--------------------------------- |
| **微信小程序 SDK**            | 支持微信登录、分享、支付等基础功能 |
| **QQ开放平台 SDK**            | 实现 QQ 快捷登录功能               |
| **高德地图 / 腾讯地图 API**   | 地图定位、路线规划、POI检索        |
| **七牛云 / 阿里云OSS**        | 图片、视频资源存储与 CDN 加速      |
| **短信服务（阿里云/腾讯云）** | 注册、找回密码时发送验证码         |
| **HTTPS + SSL证书**           | 所有接口通信加密，保障数据安全     |

------

## 四、关键技术实现方案

### 1. 用户注册与登录

- 邮箱/手机号注册
  - 使用短信验证码验证手机号
  - 邮箱验证通过邮件发送链接或验证码
- 第三方登录
  - 微信登录：调用微信提供的 `wx.login()` 获取 code，后端解密获取 openid
  - QQ 登录：接入 QQ 开放平台 OAuth2.0 授权流程
- JWT Token 认证
  - 登录成功后返回 token，后续接口需携带 token 进行鉴权

### 2. 景点信息展示

- 使用 RESTful API 接口获取景点详情（GET `/api/scenic`)
- 支持分页加载、关键词搜索、标签筛选
- 图片资源使用 CDN 加速 + 懒加载优化加载速度
- 视频播放使用 `<video>` 标签或嵌入第三方视频平台播放器

### 3. 地图导航功能

- 调用第三方地图 API（如高德地图 JS API 或微信原生地图组件）
- 在景点详情页中嵌入地图组件，显示位置坐标
- “一键导航”跳转至系统地图 App 并传入起点终点参数

### 4. 评论与评分系统

- 评论内容经审核后入库，支持点赞、回复、图片上传
- 评分采用 5 星评分制，后端计算平均分并缓存
- 使用 Redis 缓存高频访问的评分数据，降低 DB 压力

### 5. 收藏与推荐系统

- 收藏数据存储在数据库中，关联用户 ID 和景点 ID
- 推荐算法初期采用简单规则匹配：
  - 浏览历史相似度
  - 收藏记录相关性
  - 热门榜单热度值
- 后期可扩展为协同过滤或基于内容的推荐模型

### 6. 后台管理系统

- 基于 Vue + Element UI 开发 PC 端后台管理界面
- 提供景点增删改查、用户管理、评论审核、数据统计等功能
- 数据可视化采用 ECharts 图表库展示趋势与排行榜

------

## 五、系统部署与运维

### 1. 部署方案

- 前端：微信小程序上传至微信开发者平台审核发布
- 后端：部署在阿里云 ECS 服务器，配合 Nginx 做反向代理
- 数据库：使用阿里云 RDS（MySQL）或 MongoDB Atlas
- 文件存储：使用阿里云 OSS 存储图片与视频资源
- 日志收集：ELK（Elasticsearch, Logstash, Kibana）或自研日志系统

### 2. 运维策略

- **监控报警**：使用 Prometheus + Grafana 监控系统性能指标
- **日志审计**：记录用户行为日志、错误日志，便于问题排查
- **灰度发布**：新功能先对部分用户开放，逐步扩大范围
- **自动扩容**：结合云平台弹性伸缩能力应对流量高峰
- **热更新机制**：支持不重启服务更新配置或修复 bug

------

## 六、安全性与合规性

- 所有敏感字段（如密码）采用 SHA-256/AES 加密存储
- 接口通信强制 HTTPS，防止中间人攻击
- 防止 SQL 注入与 XSS 攻击，输入参数严格校验
- 用户权限分级管理，区分普通用户与管理员角色
- 符合《个人信息保护法》要求，用户数据仅用于授权用途

------

## 七、附录

- 术语表：
  - JWT：JSON Web Token，用于无状态身份验证
  - RESTful API：符合 REST 设计风格的接口规范
  - CDN：内容分发网络，加速静态资源访问
- 参考文献：
  - [微信小程序官方文档](https://developers.weixin.qq.com/)
  - [uni-app 官方文档](https://uniapp.dcloud.io/)
  - [Node.js 官方文档](https://nodejs.org/)
  - [MongoDB 官方文档](https://www.mongodb.com/)
  - [JWT 官方文档](https://jwt.io/)